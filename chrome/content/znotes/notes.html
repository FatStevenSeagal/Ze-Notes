<html>
<head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.ui.position.js"></script>

<script>
var Zotero = Components.classes["@zotero.org/Zotero;1"].getService(Components.interfaces.nsISupports).wrappedJSObject;

function loaddata()
{
    var data = Zotero.ZNotes.getdata();
    var table = document.createElement("table");
    var trh = document.createElement("tr");
    table.appendChild(trh);
    data["columns"].forEach(c=>{

        var tdh = document.createElement("th");
        tdh.innerHTML = c;
        trh.appendChild(tdh)
    });
    data["values"].forEach(v=>{
        var tr = document.createElement("tr");
        table.appendChild(tr);
        data["columns"].forEach(c=>{
            let td = document.createElement("td");
            td.className = "context-menu-one";
            if(c in v){
                td.innerHTML = v[c];
            }
            tr.appendChild(td);
        });
    }); 

    document.getElementById("content").appendChild(table);

}

</script>

<style>
* {
    font-size: 1.02em;
    font-family: Arial;
}
table {
    width: 100%;
    border-spacing: 0;
    border-collapse: collapse;
}
td, th {
    border: solid 1px;
    padding:0.3em;
}

td {
    vertical-align: top;
}

th {
    text-transform: capitalize;
}

</style>

</head>
<body ondomload="loaddata">
<div id="content" style="background-color:white; padding:0.3em; width:99%;height:96%; overflow-y:auto;" >

</div>
<script>
loaddata();



$(function() {
    $.contextMenu({
        selector: '.context-menu-one', 
        callback: function(key, options) {
            var m = "clicked: " + key;
            window.console && console.log(m) || alert(m); 
        },
        items: {
            "edit": {name: "Edit", icon: "edit"},
            "cut": {name: "Cut", icon: "cut"},
           copy: {name: "Copy", icon: "copy"},
            "paste": {name: "Paste", icon: "paste"},
            "delete": {name: "Delete", icon: "delete"},
            "sep1": "---------",
            "quit": {name: "Quit", icon: function(){
                return 'context-menu-icon context-menu-icon-quit';
            }}
        }
    });

    $('.context-menu-one').on('click', function(e){
        console.log('clicked', this);
    })    
});

</script>
</body>
</html>